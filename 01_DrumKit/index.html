<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>JavaScript 30 - Drum Kit</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="container">
		<button data-key="65">
			<key>A</key>
			<div class="description">hand clap</div>
		</button>
		<button data-key="83">
			<key>S</key>
			<div class="description">hi-hat</div>
		</button>
		<button data-key="68">
			<key>D</key>
			<div class="description">open hat</div>
		</button>
		<button data-key="70">
			<key>F</key>
			<div class="description">kick</div>
		</button>
		<button data-key="71">
			<key>G</key>
			<div class="description">boom</div>
		</button>
		<button data-key="72">
			<key>H</key>
			<div class="description">ride</div>
		</button>
		<button data-key="74">
			<key>J</key>
			<div class="description">snare</div>
		</button>
		<button data-key="75">
			<key>K</key>
			<div class="description">tom</div>
		</button>
		<button data-key="76">
			<key>L</key>
			<div class="description">tink</div>
		</button>
	</div>

	<audio data-key="71" src="files/boom.wav"></audio>
	<audio data-key="65" src="files/clap.wav"></audio>
	<audio data-key="83" src="files/hihat.wav"></audio>
	<audio data-key="68" src="files/openhat.wav"></audio>
	<audio data-key="70" src="files/kick.wav"></audio>
	<audio data-key="72" src="files/ride.wav"></audio>
	<audio data-key="74" src="files/snare.wav"></audio>
	<audio data-key="76" src="files/tink.wav"></audio>
	<audio data-key="75" src="files/tom.wav"></audio>



	<script>
		const activeClassName = 'active';
		window.addEventListener('keydown', function(e) {
			// play audio with data-key = e.keyCode
			const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
			if (!audio) return;
			audio.currentTime = 0; // reset to allow quick sequential playing of audio
			audio.play();

			// add .active class to button with data-key = e.keyCode
			const button = document.querySelector(`button[data-key="${e.keyCode}"]`);
			if (!button) return;
			button.classList.add(activeClassName);
		});
		// add a transitionend listener to each key to reset the class name
		const keys = document.querySelectorAll('button[data-key]');
		keys.forEach(key => key.addEventListener('transitionend', function() {
			this.classList.remove(activeClassName);
		}));
	</script>
</body>
</html>